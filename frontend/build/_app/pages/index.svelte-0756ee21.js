import{S as a,i as e,s,e as t,k as n,t as o,c,a as i,n as r,g as l,d as u,b as h,f as m,F as f,H as d,I as g,h as p,G as v,J as y,A as I,K as S}from"../chunks/vendor-6f03b65a.js";function N(a){let e,s,I,S,N,b,w,T,J,O,E,G,P,U,j,$,k,B,C,q,D,R,V,x,A,F=JSON.stringify(a[3])+"";return{c(){e=t("main"),s=t("div"),I=t("input"),S=n(),N=t("button"),b=o("Create game"),w=n(),T=t("br"),J=n(),O=t("div"),E=t("input"),G=n(),P=t("input"),U=n(),j=t("button"),$=o("Join Game"),k=n(),B=t("div"),C=o(F),q=n(),D=t("br"),R=o("\n\t\tSecret: "),V=o(a[2]),this.h()},l(t){e=c(t,"MAIN",{});var n=i(e);s=c(n,"DIV",{class:!0});var o=i(s);I=c(o,"INPUT",{}),S=r(o),N=c(o,"BUTTON",{});var h=i(N);b=l(h,"Create game"),h.forEach(u),o.forEach(u),w=r(n),T=c(n,"BR",{}),J=r(n),O=c(n,"DIV",{class:!0});var m=i(O);E=c(m,"INPUT",{}),G=r(m),P=c(m,"INPUT",{}),U=r(m),j=c(m,"BUTTON",{});var f=i(j);$=l(f,"Join Game"),f.forEach(u),m.forEach(u),k=r(n),B=c(n,"DIV",{class:!0});var d=i(B);C=l(d,F),q=r(d),D=c(d,"BR",{}),R=l(d,"\n\t\tSecret: "),V=l(d,a[2]),d.forEach(u),n.forEach(u),this.h()},h(){h(s,"class","svelte-qemy0u"),h(O,"class","svelte-qemy0u"),h(B,"class","svelte-qemy0u")},m(t,n){m(t,e,n),f(e,s),f(s,I),d(I,a[0]),f(s,S),f(s,N),f(N,b),f(e,w),f(e,T),f(e,J),f(e,O),f(O,E),d(E,a[0]),f(O,G),f(O,P),d(P,a[1]),f(O,U),f(O,j),f(j,$),f(e,k),f(e,B),f(B,C),f(B,q),f(B,D),f(B,R),f(B,V),x||(A=[g(I,"input",a[6]),g(N,"click",a[4]),g(E,"input",a[7]),g(P,"input",a[8]),g(j,"click",a[5])],x=!0)},p(a,[e]){1&e&&I.value!==a[0]&&d(I,a[0]),1&e&&E.value!==a[0]&&d(E,a[0]),2&e&&P.value!==a[1]&&d(P,a[1]),4&e&&p(V,a[2])},i:v,o:v,d(a){a&&u(e),x=!1,y(A)}}}function b(a,e,s){let t,n,o,c;console.log("Refreshing...");I((async()=>{c=await(async()=>{console.log("Connecting...");const a=await(new S).withUrl("/api").build();return await a.start(),a})(),console.log(c)}));const i=async()=>{const{connectionId:a}=c,e=await fetch(`/api/joinGameStream/${n}`,{method:"POST",body:JSON.stringify({connectionId:a,playerSecret:o})});console.log(`Join game stream response: ${e.status}`)};return[t,n,o,undefined,async()=>{const{connectionId:a}=c,e=await fetch("/api/createGame",{method:"POST",body:JSON.stringify({connectionId:a,playerName:t})});console.log(`Create game response: ${e.status}`);const r=await e.json();console.log(r),s(2,o=r.playerSecret),s(1,n=r.game),i()},async()=>{const{connectionId:a}=c,e=await fetch(`/api/joinGame/${n}`,{method:"POST",body:JSON.stringify({connectionId:a,playerName:t})});console.log(`Join game response: ${e.status}`);const s=await e.json();console.log(s)},function(){t=this.value,s(0,t)},function(){t=this.value,s(0,t)},function(){n=this.value,s(1,n)}]}export default class extends a{constructor(a){super(),e(this,a,b,N,s,{})}}
