import{S as a,i as e,s,e as t,k as n,t as o,c,a as i,n as r,g as l,d as u,b as h,f as d,F as f,H as m,I as p,h as g,G as v,J as y,A as I,K as S}from"../chunks/vendor-6f03b65a.js";function N(a){let e,s,I,S,N,b,w,T,J,O,E,G,P,U,j,k,B,C,q,D,R,V,$,x,A,F=JSON.stringify(a[3])+"";return{c(){e=t("main"),s=t("div"),I=t("input"),S=n(),N=t("button"),b=o("Create game"),w=n(),T=t("br"),J=n(),O=t("div"),E=t("input"),G=n(),P=t("input"),U=n(),j=t("button"),k=o("Join Game"),B=n(),C=t("div"),q=o(F),D=n(),R=t("br"),V=o("\n\t\tSecret: "),$=o(a[2]),this.h()},l(t){e=c(t,"MAIN",{});var n=i(e);s=c(n,"DIV",{class:!0});var o=i(s);I=c(o,"INPUT",{}),S=r(o),N=c(o,"BUTTON",{});var h=i(N);b=l(h,"Create game"),h.forEach(u),o.forEach(u),w=r(n),T=c(n,"BR",{}),J=r(n),O=c(n,"DIV",{class:!0});var d=i(O);E=c(d,"INPUT",{}),G=r(d),P=c(d,"INPUT",{}),U=r(d),j=c(d,"BUTTON",{});var f=i(j);k=l(f,"Join Game"),f.forEach(u),d.forEach(u),B=r(n),C=c(n,"DIV",{class:!0});var m=i(C);q=l(m,F),D=r(m),R=c(m,"BR",{}),V=l(m,"\n\t\tSecret: "),$=l(m,a[2]),m.forEach(u),n.forEach(u),this.h()},h(){h(s,"class","svelte-qemy0u"),h(O,"class","svelte-qemy0u"),h(C,"class","svelte-qemy0u")},m(t,n){d(t,e,n),f(e,s),f(s,I),m(I,a[0]),f(s,S),f(s,N),f(N,b),f(e,w),f(e,T),f(e,J),f(e,O),f(O,E),m(E,a[0]),f(O,G),f(O,P),m(P,a[1]),f(O,U),f(O,j),f(j,k),f(e,B),f(e,C),f(C,q),f(C,D),f(C,R),f(C,V),f(C,$),x||(A=[p(I,"input",a[6]),p(N,"click",a[4]),p(E,"input",a[7]),p(P,"input",a[8]),p(j,"click",a[5])],x=!0)},p(a,[e]){1&e&&I.value!==a[0]&&m(I,a[0]),1&e&&E.value!==a[0]&&m(E,a[0]),2&e&&P.value!==a[1]&&m(P,a[1]),4&e&&g($,a[2])},i:v,o:v,d(a){a&&u(e),x=!1,y(A)}}}function b(a,e,s){let t,n,o,c;console.log("Refreshing...");I((async()=>{c=await(async()=>{console.log("Connecting...");const a=await(new S).withUrl("/api").build();return await a.start(),a})(),console.log(c)}));const i=async()=>{const{connectionId:a}=c,e=await fetch("/api/joinGameStream",{method:"POST",body:JSON.stringify({connectionId:a,playerSecret:o})});console.log(`Join game stream response: ${e.status}`)};return[t,n,o,undefined,async()=>{const{connectionId:a}=c,e=await fetch("/api/createGame",{method:"POST",body:JSON.stringify({connectionId:a,playerName:t})});console.log(`Create game response: ${e.status}`);const n=await e.json();console.log(n),s(2,o=n.playerSecret),i()},async()=>{const{connectionId:a}=c,e=await fetch("/api/joinGame",{method:"POST",body:JSON.stringify({connectionId:a,playerName:t,id:n})});console.log(`Join game response: ${e.status}`);const s=await e.json();console.log(s)},function(){t=this.value,s(0,t)},function(){t=this.value,s(0,t)},function(){n=this.value,s(1,n)}]}export default class extends a{constructor(a){super(),e(this,a,b,N,s,{})}}
