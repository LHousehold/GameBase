import{S as a,i as e,s as t,e as n,k as s,t as o,c,a as i,n as r,g as l,d as u,b as h,f as m,F as f,H as d,I as p,h as g,G as v,J as y,A as I,K as S}from"../chunks/vendor-6f03b65a.js";function N(a){let e,t,I,S,N,w,b,T,J,O,E,G,P,U,j,$,k,B,C,R,q,A,D,V,x,F=JSON.stringify(a[3])+"";return{c(){e=n("main"),t=n("div"),I=n("input"),S=s(),N=n("button"),w=o("Create game"),b=s(),T=n("br"),J=s(),O=n("div"),E=n("input"),G=s(),P=n("input"),U=s(),j=n("button"),$=o("Join Game"),k=s(),B=n("div"),C=o(F),R=s(),q=n("br"),A=o("\n\t\tSecret: "),D=o(a[2]),this.h()},l(n){e=c(n,"MAIN",{});var s=i(e);t=c(s,"DIV",{class:!0});var o=i(t);I=c(o,"INPUT",{}),S=r(o),N=c(o,"BUTTON",{});var h=i(N);w=l(h,"Create game"),h.forEach(u),o.forEach(u),b=r(s),T=c(s,"BR",{}),J=r(s),O=c(s,"DIV",{class:!0});var m=i(O);E=c(m,"INPUT",{}),G=r(m),P=c(m,"INPUT",{}),U=r(m),j=c(m,"BUTTON",{});var f=i(j);$=l(f,"Join Game"),f.forEach(u),m.forEach(u),k=r(s),B=c(s,"DIV",{class:!0});var d=i(B);C=l(d,F),R=r(d),q=c(d,"BR",{}),A=l(d,"\n\t\tSecret: "),D=l(d,a[2]),d.forEach(u),s.forEach(u),this.h()},h(){h(t,"class","svelte-qemy0u"),h(O,"class","svelte-qemy0u"),h(B,"class","svelte-qemy0u")},m(n,s){m(n,e,s),f(e,t),f(t,I),d(I,a[0]),f(t,S),f(t,N),f(N,w),f(e,b),f(e,T),f(e,J),f(e,O),f(O,E),d(E,a[0]),f(O,G),f(O,P),d(P,a[1]),f(O,U),f(O,j),f(j,$),f(e,k),f(e,B),f(B,C),f(B,R),f(B,q),f(B,A),f(B,D),V||(x=[p(I,"input",a[6]),p(N,"click",a[4]),p(E,"input",a[7]),p(P,"input",a[8]),p(j,"click",a[5])],V=!0)},p(a,[e]){1&e&&I.value!==a[0]&&d(I,a[0]),1&e&&E.value!==a[0]&&d(E,a[0]),2&e&&P.value!==a[1]&&d(P,a[1]),4&e&&g(D,a[2])},i:v,o:v,d(a){a&&u(e),V=!1,y(x)}}}function w(a,e,t){let n,s,o,c;console.log("Refreshing...");I((async()=>{c=await(async()=>{console.log("Connecting...");const a=await(new S).withUrl("/api").withAutomaticReconnect().build();return await a.start(),a})(),console.log(c)}));const i=async()=>{const{connectionId:a}=c,e=await fetch(`/api/joinGameStream/${s}`,{method:"POST",body:JSON.stringify({connectionId:a,playerSecret:o})});console.log(`Join game stream response: ${e.status}`)};return[n,s,o,undefined,async()=>{const{connectionId:a}=c,e=await fetch("/api/createGame",{method:"POST",body:JSON.stringify({connectionId:a,playerName:n})});console.log(`Create game response: ${e.status}`);const r=await e.json();t(2,o=r.playerSecret),t(1,s=r.game),i()},async()=>{const{connectionId:a}=c,e=await fetch(`/api/joinGame/${s}`,{method:"POST",body:JSON.stringify({connectionId:a,playerName:n})});console.log(`Join game response: ${e.status}`);const t=await e.json();console.log(t)},function(){n=this.value,t(0,n)},function(){n=this.value,t(0,n)},function(){s=this.value,t(1,s)}]}export default class extends a{constructor(a){super(),e(this,a,w,N,t,{})}}
